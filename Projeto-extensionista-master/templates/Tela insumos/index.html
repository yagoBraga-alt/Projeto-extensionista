<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerenciar Insumos</title>
  <link rel="stylesheet" href="../../static/Tela insumos/styles.css">
</head>
<body>
  <header>
    <div class="logo">APAE</div>
    <h1>Gerenciar Insumos</h1>
    <div class="accessibility">‚ò∫Ô∏é</div>
  </header>
  <div class="content">
    <div class="mascot">
      <img src="../../static/img/logoBiscoitoDivertido.png" alt="Logo do biscoito">
    </div>
    <div class="title">Adicione insumos</div>
    <div class="subtitle">Gerencie os ingredientes necess√°rios para a produ√ß√£o</div>
    <div class="ingredientes-container" id="ingredientes-container">
      <!-- Insumos ser√£o adicionados aqui via JavaScript -->
    </div>
    <div class="add-float">
      <button id="addButton" aria-label="Adicionar novo insumo">+</button>
    </div>
    <div class="back">
      <button onclick="window.location.href='{{ url_for('menu_page') }}'">Voltar</button>
    </div>
  </div>

  <script>
    
    // Insumos fixos
    const insumosFixos = [
      { nome: "Farinha", imagem: "../../static/img/farinha.png" },
      { nome: "Ovo", imagem: "../../static/img/ovo.png" },
      { nome: "Leite", imagem: "../../static/img/garrafa-de-leite.png" },
      { nome: "Fermento", imagem: "../../static/img/fermento.png" },
      { nome: "Baunilha", imagem: "../../static/img/baunilha.png" },
      { nome: "A√ß√∫car", imagem: "../../static/img/acucar.png" },
      { nome: "Manteiga", imagem: "../../static/img/manteiga.png" },
      { nome: "Chocolate", imagem: "../../static/img/chocolate.png" }
    ];
    const container = document.getElementById('ingredientes-container');
    // Renderiza insumos fixos
    insumosFixos.forEach(insumo => {
      const a = document.createElement('a');
      a.className = 'ingrediente-btn';
      a.href = `/editar_insumos?nome=${encodeURIComponent(insumo.nome)}`;
      a.innerHTML = `<img src="${insumo.imagem}" alt="${insumo.nome}" class="icon-ingrediente"><span>${insumo.nome}</span>`;
      container.appendChild(a);
    });
    // Renderiza insumos do usu√°rio
    function renderInsumoUser(insumo) {
      const div = document.createElement('div');
      div.className = 'ingrediente-btn';
      div.style.position = 'relative';
      div.innerHTML = `
        <img src="${insumo.imagem}" alt="${insumo.nome}" class="icon-ingrediente">
        <span>${insumo.nome}</span>
        <button class="edit-btn" aria-label="Editar ${insumo.nome}" style="position:absolute;top:8px;right:40px;">‚úèÔ∏è</button>
        <button class="delete-btn" aria-label="Excluir ${insumo.nome}" style="position:absolute;top:8px;right:8px;">üóëÔ∏è</button>
      `;
      // Editar insumo
      div.querySelector('.edit-btn').onclick = function(e) {
        e.stopPropagation();
        window.location.href = `/editar_insumos?nome=${encodeURIComponent(insumo.nome)}`;
      };
      // Excluir insumo
      div.querySelector('.delete-btn').onclick = function(e) {
        e.stopPropagation();
        let insumos = JSON.parse(localStorage.getItem('insumosUser')) || [];
        insumos = insumos.filter(i => i.nome !== insumo.nome);
        localStorage.setItem('insumosUser', JSON.stringify(insumos));
        div.remove();
      };
      container.appendChild(div);
    }
    // Carrega insumos do usu√°rio
    const insumosUser = JSON.parse(localStorage.getItem('insumosUser')) || [];
    insumosUser.forEach(renderInsumoUser);
    // Bot√£o de adicionar novo insumo
    document.getElementById('addButton').onclick = function() {
      window.location.href = '';
    };
  </script>
</body>
</html>
